<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å¸«è¾¦å…¬å®¤</title>
    <style>
        :root { --gold: #D4AF37; --bg: #0A0A0A; }
        body {
            background: radial-gradient(circle at top, #2C2C2C 0%, var(--bg) 100%);
            color: #E0E0E0; font-family: "PingFang TC", sans-serif;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; margin: 0; padding: 40px 20px;
        }
        .auth-box {
            width: 100%; max-width: 350px; padding: 30px;
            background: rgba(255, 255, 255, 0.03); border-radius: 24px;
            border: 1px solid rgba(212, 175, 55, 0.2); text-align: center;
            display: none; /* åˆå§‹éš±è—ï¼Œå¾… JS æª¢æŸ¥ç‹€æ…‹ */
        }
        .input-group { margin-bottom: 20px; text-align: left; }
        label { display: block; font-size: 0.75rem; color: var(--gold); margin-bottom: 8px; }
        input {
            width: 100%; padding: 14px; background: rgba(255,255,255,0.05);
            border: 1px solid rgba(212, 175, 55, 0.3); border-radius: 12px;
            color: white; box-sizing: border-box; outline: none;
        }
        .action-btn {
            width: 100%; padding: 15px; background: linear-gradient(135deg, #FFD700, #B8860B);
            border: none; border-radius: 12px; color: #000; font-weight: 800; cursor: pointer;
        }
        .toggle-link { margin-top: 25px; font-size: 0.85rem; color: #888; }
        .toggle-link span { color: var(--gold); text-decoration: underline; cursor: pointer; }
        .menu-grid { width: 100%; max-width: 400px; display: none; flex-direction: column; gap: 15px; }
        .loading { position: fixed; inset: 0; background: #000; z-index: 1000; display: flex; justify-content: center; align-items: center; color: var(--gold); }
    </style>
</head>
<body>

    <div id="loader" class="loading">æ­£åœ¨é€²å…¥è¾¦å…¬å®¤...</div>

    <header style="text-align:center; margin-bottom:30px;">
        <h1 style="color:var(--gold); letter-spacing:4px;">å°å¸«è¾¦å…¬å®¤</h1>
    </header>

    <div id="authBox" class="auth-box">
        <h2 id="authTitle" style="margin-top:0;">æˆå“¡ç™»å…¥</h2>
        <div class="input-group">
            <label>æˆå“¡éƒµç®± (Email)</label>
            <input type="email" id="email" placeholder="è¼¸å…¥ Email">
        </div>
        <div class="input-group">
            <label>é€šè¡Œå¯†ç¢¼ (Password)</label>
            <input type="password" id="password" placeholder="è¼¸å…¥å¯†ç¢¼">
        </div>
        <button class="action-btn" id="submitBtn">ç«‹å³é€²å…¥</button>
        <div class="toggle-link">
            <span id="toggleMode">å°šæœªæ“æœ‰èº«åˆ†ï¼Ÿç”³è«‹å…¥é§</span>
        </div>
    </div>

    <div id="mainMenu" class="menu-grid">
        <button onclick="window.location.href='http://www.webcoursestest.hairweb.net'" style="padding:20px; background:#1A1A1A; color:white; border:1px solid var(--gold); border-radius:15px; cursor:pointer;">ğŸ—ºï¸ ç¶“ç‡Ÿåœ°åœ–</button>
        <button onclick="window.location.href='https://www.client.hairweb.net'" style="padding:20px; background:#1A1A1A; color:white; border:1px solid var(--gold); border-radius:15px; cursor:pointer;">ğŸ‘¥ å®¢æˆ¶ç®¡ç†</button>
        <button id="logoutBtn" style="background:none; border:none; color:#555; text-decoration:underline; cursor:pointer; margin-top:20px;">é›¢é–‹è¾¦å…¬å®¤</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, sendEmailVerification } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAM4d9GqtSjNOlfguew8BktZ8ptrnBzvpc",
            authDomain: "mentor-app-b76e3.firebaseapp.com",
            projectId: "mentor-app-b76e3",
            storageBucket: "mentor-app-b76e3.firebasestorage.app",
            messagingSenderId: "757249551762",
            appId: "1:757249551762:web:1c5bfff8b1ee222047654b"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        let isLoginMode = true;

        // åˆ‡æ› è¨»å†Š/ç™»å…¥ æ¨¡å¼
        document.getElementById('toggleMode').addEventListener('click', () => {
            isLoginMode = !isLoginMode;
            document.getElementById('authTitle').innerText = isLoginMode ? "æˆå“¡ç™»å…¥" : "æˆå“¡è¨»å†Š";
            document.getElementById('submitBtn').innerText = isLoginMode ? "ç«‹å³é€²å…¥" : "å®Œæˆè¨»å†Šä¸¦å…¥é§";
            document.getElementById('toggleMode').innerText = isLoginMode ? "å°šæœªæ“æœ‰èº«åˆ†ï¼Ÿç”³è«‹å…¥é§" : "å·²æœ‰èº«åˆ†ï¼Ÿè¿”å›ç™»å…¥";
        });

        // åŸ·è¡Œ è¨»å†Šæˆ–ç™»å…¥
        document.getElementById('submitBtn').addEventListener('click', async () => {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            if(!email || !password) return alert("è«‹å®Œæ•´å¡«å¯«è³‡è¨Š");

            try {
                if (isLoginMode) {
                    await signInWithEmailAndPassword(auth, email, password);
                } else {
                    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                    // è¨»å†ŠæˆåŠŸå¾Œç™¼é€æ‚¨åœ¨å¾Œå°è¨­å®šçš„é©—è­‰ä¿¡
                    await sendEmailVerification(userCredential.user);
                    alert("è¨»å†ŠæˆåŠŸï¼å·²å¯„é€é©—è­‰ä¿¡ï¼Œè«‹è‡³ä¿¡ç®±æŸ¥æ”¶ä¸¦é©—è­‰ã€‚");
                }
            } catch (error) {
                alert("éŒ¯èª¤ï¼š" + error.message);
            }
        });

        // ç›£æ§ç‹€æ…‹
        onAuthStateChanged(auth, (user) => {
            document.getElementById('loader').style.display = 'none';
            if (user) {
                document.getElementById('authBox').style.display = 'none';
                document.getElementById('mainMenu').style.display = 'flex';
            } else {
                document.getElementById('authBox').style.display = 'block';
                document.getElementById('mainMenu').style.display = 'none';
            }
        });

        document.getElementById('logoutBtn').addEventListener('click', () => signOut(auth));
    </script>
</body>
</html>
