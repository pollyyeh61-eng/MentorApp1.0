<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°å¸«æ•¸ä½è¾¦å…¬å®¤</title>
    <style>
        :root {
            --gold-light: #FFD700;
            --gold-main: #D4AF37;
            --gold-dark: #B8860B;
            --bg-gradient: radial-gradient(circle at top, #2C2C2C 0%, #0A0A0A 100%);
        }

        body {
            background: var(--bg-gradient);
            color: #E0E0E0;
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 50px 20px;
            box-sizing: border-box;
        }

        header { text-align: center; margin-bottom: 50px; }
        h1 {
            background: linear-gradient(135deg, var(--gold-light), var(--gold-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2rem; letter-spacing: 4px; font-weight: 800;
        }
        .subtitle { font-size: 0.8rem; color: var(--gold-main); letter-spacing: 2px; margin-top: 5px; opacity: 0.8; }

        .auth-box {
            width: 100%; max-width: 350px;
            background: rgba(255,255,255,0.05);
            padding: 40px 30px;
            border-radius: 24px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            text-align: center;
            display: none; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        .google-btn {
            width: 100%; background: white; border-radius: 12px;
            padding: 14px; display: flex; align-items: center; justify-content: center;
            gap: 12px; cursor: pointer; border: none; margin: 25px 0;
            font-weight: bold; font-size: 1rem; color: #333;
            transition: transform 0.2s;
        }
        .google-btn:active { transform: scale(0.98); }

        .toggle-link { color: var(--gold-main); text-decoration: underline; cursor: pointer; font-size: 0.85rem; }

        .menu-grid { width: 100%; max-width: 400px; display: none; flex-direction: column; gap: 20px; }

        .btn {
            background: linear-gradient(145deg, #2d2d2d, #1a1a1a);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 20px; padding: 22px;
            text-decoration: none; color: white; display: flex; align-items: center;
        }

        .icon-box { width: 45px; height: 45px; font-size: 22px; margin-right: 15px; display: flex; align-items: center; justify-content: center; background: #000; border-radius: 12px; border: 1px solid var(--gold-dark); }
        
        .loading-screen { position: fixed; inset: 0; background: #000; display: flex; justify-content: center; align-items: center; z-index: 1000; color: var(--gold-main); }
    </style>
</head>
<body>

    <div id="loader" class="loading-screen">èº«åˆ†é©—è­‰ä¸­...</div>

    <header>
        <h1>å°å¸«è¾¦å…¬å®¤</h1>
        <div class="subtitle">Private Digital Workspace</div>
    </header>

    <div id="authBox" class="auth-box">
        <h2 id="authTitle" style="color: var(--gold-light); margin-top:0;">æ­¡è¿å…¥é§</h2>
        <p id="authDesc" style="font-size: 0.9rem; color: #aaa; line-height: 1.6;">è«‹ä½¿ç”¨ Google å¸³è™Ÿé©—è­‰<br>é–‹å•Ÿæ‚¨çš„å°ˆå±¬è³‡æº</p>
        
        <button class="google-btn" id="googleActionBtn">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="20">
            <span id="btnText">é€²å…¥è¾¦å…¬å®¤</span>
        </button>

        <div class="toggle-link" id="toggleAuth">ç¬¬ä¸€æ¬¡ä¾†ï¼Ÿé»æ­¤ç”³è«‹å…¥é§</div>
    </div>

    <div id="mainMenu" class="menu-grid">
        <a href="http://www.webcoursestest.hairweb.net" class="btn">
            <div class="icon-box">ğŸ—ºï¸</div>
            <div><b>ç¶“ç‡Ÿåœ°åœ–</b><br><small>æˆ°ç•¥ä½ˆå±€èˆ‡æ ¸å¿ƒæ€ç¶­</small></div>
        </a>
        <div style="text-align: center; margin-top: 30px;">
            <button id="logoutBtn" style="background:none; border:none; color: #555; text-decoration: underline; cursor:pointer;">é›¢é–‹è¾¦å…¬å®¤</button>
        </div>
    </div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithRedirect, getRedirectResult, onAuthStateChanged, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = { /* ä¿æŒæ‚¨çš„é…ç½®ä¸è®Š */ };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // å¼·åˆ¶é–‹å•Ÿæœ¬åœ°æŒä¹…åŒ–ï¼ˆé—œæ‰ç€è¦½å™¨å†é–‹ä¹Ÿä¸ç”¨é‡æ–°é©—è­‰ï¼‰
    setPersistence(auth, browserLocalPersistence);

    // ã€åŠ é€Ÿé—œéµã€‘é åˆ¤æª¢æŸ¥ï¼šå¦‚æœæœ¬åœ°å·²ç¶“æœ‰ç™»å…¥ç´€éŒ„ï¼Œç›´æ¥å…ˆé–‹é–€
    if (localStorage.getItem('fast_access') === 'true') {
        document.getElementById('loader').style.display = 'none';
        document.getElementById('mainMenu').style.display = 'flex';
        document.getElementById('authBox').style.display = 'none';
    }

    onAuthStateChanged(auth, (user) => {
        document.getElementById('loader').style.display = 'none';
        if (user) {
            localStorage.setItem('fast_access', 'true'); // æ¨™è¨˜ç‚ºå·²çŸ¥æˆå“¡
            document.getElementById('authBox').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'flex';
        } else {
            localStorage.removeItem('fast_access');
            document.getElementById('authBox').style.display = 'block';
            document.getElementById('mainMenu').style.display = 'none';
        }
    });

    document.getElementById('googleActionBtn').addEventListener('click', () => {
        document.getElementById('loader').innerText = "æ­£åœ¨å‰å¾€ Google å®‰å…¨é©—è­‰...";
        document.getElementById('loader').style.display = 'flex';
        signInWithRedirect(auth, provider);
    });

    // ç™»å‡ºæ™‚æ¸…é™¤å¿«å–
    document.getElementById('logoutBtn').addEventListener('click', () => {
        localStorage.removeItem('fast_access');
        auth.signOut();
    });

    getRedirectResult(auth);
</script>
</body>
</html>

